CREATE OR REPLACE PROCEDURE ECOMMERCE.LogistaAdicionaProduto(O_NifLogista DECIMAL(9,0), O_NomeProduto VARCHAR, O_Stock DECIMAL, O_Price DECIMAL(10,2), O_description VARCHAR, O_categoria VARCHAR)
LANGUAGE plpgsql
AS $$
	--BEGIN
	DECLARE 
		O_CODIGO DECIMAL :=RAND()*1000;
		O_CODIGO2 DECIMAL:=RAND()*1000;
		--SET O_CODIGO=RAND()*1000;
	BEGIN	
		INSERT INTO ECOMMERCE.PRODUCT(IDPRODUCT, Stock, Nome, Price, Description, Categoria)
		VALUES (O_CODIGO, O_Stock, O_NomeProduto, O_Price, O_description, O_categoria);
		--DECLARE O_CODIGO2 INT;
		--SET O_CODIGO2=RAND()*1000;
		INSERT INTO ECOMMERCE.LOGISTA_PRODUTO(ADDP_ID, LOGISTA_NIF, PRODUCT_ID)
		VALUES (O_CODIGO2, O_NifLogista, O_CODIGO);
	END;
$$;


CREATE OR REPLACE PROCEDURE ECOMMERCE.ClienteFavorita(O_Nif_client DECIMAL(9,0), O_PRODUCT_ID DECIMAL)
LANGUAGE plpgsql
AS $$
	DECLARE
		FID DECIMAL := RAND()*1000;
	BEGIN
		INSERT INTO ECOMMERCE.FAVOURITE(FAV_ID, USER_NIF, PRODUCT_ID)
		VALUES (FID, O_Nif_client, O_PRODUCT_ID);
	END;
$$;

CREATE OR REPLACE PROCEDURE ECOMMERCE.ClientAddProductCart(O_Nif_client DECIMAL(9,0), O_PRODUCT_ID DECIMAL, O_CART_ID DECIMAL, O_QUANTITY DECIMAL)
LANGUAGE plpgsql
AS $$
	DECLARE
		--CARTID DECIMAL := RAND()*1000;
		CARTPRODUCTID DECIMAL := RAND()*1000;
	BEGIN
		INSERT INTO ECOMMERCE.CARRINHO_PRODUCT(ID_C_P, CART_ID, PRODUCT_ID, QUANTITY)
		VALUES (CARTPRODUCTID, O_CART_ID, O_PRODUCT_ID, O_QUANTITY);
	END;
$$;

-- GERAR UM CARRINHO VAZIO EX:QUANDO SE CRIA UM NOVO UTILIZADOR
-- FAZER UM UPDATE AUTOM√ÅTICO DO TOTAL DO CARRINHO

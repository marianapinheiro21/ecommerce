CREATE OR REPLACE PROCEDURE ECOMMERCE.LogistaAdicionaProduto(O_NifLogista NUMERIC(9,0), O_NomeProduto VARCHAR, O_Stock NUMERIC, O_Price NUMERIC(10,2), O_description VARCHAR, O_categoria VARCHAR)
LANGUAGE plpgsql
AS $$
	--BEGIN
	DECLARE 
		O_CODIGO NUMERIC :=RAND()*1000;
		O_CODIGO2 NUMERIC:=RAND()*1000;
		--SET O_CODIGO=RAND()*1000;
	BEGIN	
		INSERT INTO ECOMMERCE.PRODUCT(IDPRODUCT, Stock, Nome, Price, Description, Categoria)
		VALUES (O_CODIGO, O_Stock, O_NomeProduto, O_Price, O_description, O_categoria);
		--DECLARE O_CODIGO2 INT;
		--SET O_CODIGO2=RAND()*1000;
		INSERT INTO ECOMMERCE.LOGISTA_PRODUTO(ADDP_ID, LOGISTA_NIF, PRODUCT_ID)
		VALUES (O_CODIGO2, O_NifLogista, O_CODIGO);
		
	END;
$$;



CREATE OR REPLACE PROCEDURE ECOMMERCE.ClienteFavorita(O_Nif_client NUMERIC(9,0), O_PRODUCT_ID NUMERIC)
LANGUAGE plpgsql
AS $$
	DECLARE
		FID NUMERIC := RAND()*1000;
	BEGIN
		INSERT INTO ECOMMERCE.FAVOURITE(FAV_ID, USER_NIF, PRODUCT_ID)
		VALUES (FID, O_Nif_client, O_PRODUCT_ID);
	END;
$$;



CREATE OR REPLACE PROCEDURE ECOMMERCE.NewCart(O_USER_NIF)
LANGUAGE plpgsql
AS $$
	DECLARE
		CART_ID NUMERIC:= RAND()*1000;
		PRICE NUMERIC = 0.00
	BEGIN
		INSERT INTO ECOMMERCE.CARRINHO()
	END;
$$;



CREATE OR REPLACE PROCEDURE ECOMMERCE.ClientAddProductCart(O_Nif_client NUMERIC(9,0), O_PRODUCT_ID NUMERIC, O_CART_ID NUMERIC, O_QUANTITY NUMERIC)
LANGUAGE plpgsql
AS $$
	DECLARE
		--CARTID NUMERIC := RAND()*1000;
		CARTPRODUCTID NUMERIC := RAND()*1000;
	BEGIN
		INSERT INTO ECOMMERCE.CARRINHO_PRODUCT_VENDA_VENDA(ID_C_P, CART_ID, PRODUCT_ID, QUANTITY)
		VALUES (CARTPRODUCTID, O_CART_ID, O_PRODUCT_ID, O_QUANTITY);
	END;
$$;



-- GERAR UM CARRINHO VAZIO EX:QUANDO SE CRIA UM NOVO UTILIZADOR
-- FAZER UM UPDATE AUTOM√ÅTICO DO TOTAL DO CARRINHO

-- ADICIONAR VALORES INICIAIS
